{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"C:/Users/piroi16/Documents/GitHub/Solana-NFT-FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"C:/Users/piroi16/Documents/GitHub/Solana-NFT-FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"C:/Users/piroi16/Documents/GitHub/Solana-NFT-FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _assertThisInitialized = require(\"C:/Users/piroi16/Documents/GitHub/Solana-NFT-FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/assertThisInitialized\");\n\nvar _inherits = require(\"C:/Users/piroi16/Documents/GitHub/Solana-NFT-FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _createSuper = require(\"C:/Users/piroi16/Documents/GitHub/Solana-NFT-FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createSuper\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Coin98Adapter = void 0;\n\nvar tslib_1 = require(\"tslib\");\n\nvar web3_js_1 = require(\"@solana/web3.js\");\n\nvar bs58 = (0, tslib_1.__importStar)(require(\"bs58\"));\nvar eventemitter3_1 = (0, tslib_1.__importDefault)(require(\"eventemitter3\"));\n\nvar types_1 = require(\"../types\");\n\nvar Coin98Adapter = /*#__PURE__*/function (_eventemitter3_1$defa) {\n  _inherits(Coin98Adapter, _eventemitter3_1$defa);\n\n  var _super = _createSuper(Coin98Adapter);\n\n  function Coin98Adapter() {\n    var _this;\n\n    _classCallCheck(this, Coin98Adapter);\n\n    _this = _super.call(this);\n\n    _this.connect = function () {\n      return (0, tslib_1.__awaiter)(_assertThisInitialized(_this), void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!this._onProcess) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                if (!(window.coin98 === undefined)) {\n                  _context.next = 4;\n                  break;\n                }\n\n                throw new Error(\"Coin98 not installed\");\n\n              case 4:\n                this._onProcess = true;\n                _context.next = 7;\n                return window.coin98.sol.request({\n                  method: \"sol_accounts\"\n                }).then(function (rawAccounts) {\n                  var accounts = rawAccounts;\n\n                  if (!accounts[0]) {\n                    throw new Error(\"No accounts found.\");\n                  }\n\n                  _this2._publicKey = new web3_js_1.PublicKey(accounts[0]);\n                  _this2._connected = true;\n\n                  _this2.emit(\"connect\", _this2._publicKey);\n                }).catch(function () {\n                  _this2.disconnect();\n                }).finally(function () {\n                  _this2._onProcess = false;\n                });\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    };\n\n    _this._onProcess = false;\n    _this._connected = false;\n    return _this;\n  }\n\n  _createClass(Coin98Adapter, [{\n    key: \"connected\",\n    get: function get() {\n      return this._connected;\n    }\n  }, {\n    key: \"autoApprove\",\n    get: function get() {\n      return false;\n    }\n  }, {\n    key: \"signAllTransactions\",\n    value: function signAllTransactions(transactions) {\n      return (0, tslib_1.__awaiter)(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var result, i, transaction, signed;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                result = [];\n                i = 0;\n\n              case 2:\n                if (!(i < transactions.length)) {\n                  _context2.next = 12;\n                  break;\n                }\n\n                transaction = transactions[i];\n\n                if (!transaction) {\n                  _context2.next = 9;\n                  break;\n                }\n\n                _context2.next = 7;\n                return this.signTransaction(transaction);\n\n              case 7:\n                signed = _context2.sent;\n                result.push(signed);\n\n              case 9:\n                i++;\n                _context2.next = 2;\n                break;\n\n              case 12:\n                return _context2.abrupt(\"return\", result);\n\n              case 13:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n    }\n  }, {\n    key: \"publicKey\",\n    get: function get() {\n      return this._publicKey || types_1.DEFAULT_PUBLIC_KEY;\n    }\n  }, {\n    key: \"signTransaction\",\n    value: function signTransaction(transaction) {\n      return (0, tslib_1.__awaiter)(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var _yield$window$coin98$, publicKey, signature;\n\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (window.coin98) {\n                  _context3.next = 2;\n                  break;\n                }\n\n                throw new Error(\"Coin98 not found\");\n\n              case 2:\n                _context3.next = 4;\n                return window.coin98.sol.request({\n                  method: \"sol_sign\",\n                  params: [transaction]\n                });\n\n              case 4:\n                _yield$window$coin98$ = _context3.sent;\n                publicKey = _yield$window$coin98$.publicKey;\n                signature = _yield$window$coin98$.signature;\n                transaction.addSignature(new web3_js_1.PublicKey(publicKey), bs58.decode(signature));\n                return _context3.abrupt(\"return\", transaction);\n\n              case 9:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n    }\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      var _a;\n\n      if (this._publicKey) {\n        this._publicKey = undefined;\n        this._connected = false;\n        (_a = window.coin98) === null || _a === void 0 ? void 0 : _a.sol.disconnect();\n        this.emit(\"disconnect\");\n      }\n    }\n  }]);\n\n  return Coin98Adapter;\n}(eventemitter3_1.default);\n\nexports.Coin98Adapter = Coin98Adapter;","map":{"version":3,"sources":["../../../src/adapters/coin98/index.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Coin98Adapter = void 0;\nconst tslib_1 = require(\"tslib\");\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst bs58 = (0, tslib_1.__importStar)(require(\"bs58\"));\nconst eventemitter3_1 = (0, tslib_1.__importDefault)(require(\"eventemitter3\"));\nconst types_1 = require(\"../types\");\nclass Coin98Adapter extends eventemitter3_1.default {\n    constructor() {\n        super();\n        this.connect = () => (0, tslib_1.__awaiter)(this, void 0, void 0, function* () {\n            if (this._onProcess) {\n                return;\n            }\n            if (window.coin98 === undefined) {\n                throw new Error(\"Coin98 not installed\");\n            }\n            this._onProcess = true;\n            yield window.coin98.sol\n                .request({ method: \"sol_accounts\" })\n                .then((rawAccounts) => {\n                const accounts = rawAccounts;\n                if (!accounts[0]) {\n                    throw new Error(\"No accounts found.\");\n                }\n                this._publicKey = new web3_js_1.PublicKey(accounts[0]);\n                this._connected = true;\n                this.emit(\"connect\", this._publicKey);\n            })\n                .catch(() => {\n                this.disconnect();\n            })\n                .finally(() => {\n                this._onProcess = false;\n            });\n        });\n        this._onProcess = false;\n        this._connected = false;\n    }\n    get connected() {\n        return this._connected;\n    }\n    get autoApprove() {\n        return false;\n    }\n    signAllTransactions(transactions) {\n        return (0, tslib_1.__awaiter)(this, void 0, void 0, function* () {\n            const result = [];\n            for (let i = 0; i < transactions.length; i++) {\n                const transaction = transactions[i];\n                if (transaction) {\n                    const signed = yield this.signTransaction(transaction);\n                    result.push(signed);\n                }\n            }\n            return result;\n        });\n    }\n    get publicKey() {\n        return this._publicKey || types_1.DEFAULT_PUBLIC_KEY;\n    }\n    signTransaction(transaction) {\n        return (0, tslib_1.__awaiter)(this, void 0, void 0, function* () {\n            if (!window.coin98) {\n                throw new Error(\"Coin98 not found\");\n            }\n            const { publicKey, signature } = (yield window.coin98.sol.request({\n                method: \"sol_sign\",\n                params: [transaction],\n            }));\n            transaction.addSignature(new web3_js_1.PublicKey(publicKey), bs58.decode(signature));\n            return transaction;\n        });\n    }\n    disconnect() {\n        var _a;\n        if (this._publicKey) {\n            this._publicKey = undefined;\n            this._connected = false;\n            (_a = window.coin98) === null || _a === void 0 ? void 0 : _a.sol.disconnect();\n            this.emit(\"disconnect\");\n        }\n    }\n}\nexports.Coin98Adapter = Coin98Adapter;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}