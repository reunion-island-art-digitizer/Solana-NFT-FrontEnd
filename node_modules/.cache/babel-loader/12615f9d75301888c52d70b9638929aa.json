{"ast":null,"code":"\"use strict\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WalletSelectorModal = exports.ModalStep = void 0;\n\nconst jsx_runtime_1 = require(\"@emotion/react/jsx-runtime\");\n\nconst use_solana_1 = require(\"@saberhq/use-solana\");\n\nconst react_1 = require(\"react\");\n\nconst react_device_detect_1 = require(\"react-device-detect\");\n\nconst Modal_1 = require(\"../Modal\");\n\nconst WalletStepConnecting_1 = require(\"./WalletStepConnecting\");\n\nconst WalletStepIntro_1 = require(\"./WalletStepIntro\");\n\nconst DefaultAppIcon_1 = require(\"./WalletStepIntro/DefaultAppIcon\");\n\nconst WalletStepLedgerAdvanced_1 = require(\"./WalletStepLedgerAdvanced\");\n\nconst WalletStepRedirect_1 = require(\"./WalletStepRedirect\");\n\nconst WalletStepSelect_1 = require(\"./WalletStepSelect\");\n\nvar ModalStep;\n\n(function (ModalStep) {\n  ModalStep[\"Intro\"] = \"intro\";\n  ModalStep[\"Select\"] = \"select\";\n  ModalStep[\"Redirect\"] = \"redirect\";\n  ModalStep[\"Connecting\"] = \"connecting\";\n  ModalStep[\"LedgerAdvanced\"] = \"ledger-advanced\";\n})(ModalStep = exports.ModalStep || (exports.ModalStep = {}));\n\nconst defaultOnWalletKitError = err => {\n  console.error(err);\n};\n\nconst WalletSelectorModal = _a => {\n  var {\n    app,\n    onWalletKitError = defaultOnWalletKitError,\n    initialStep = ModalStep.Intro\n  } = _a,\n      modalProps = __rest(_a, [\"app\", \"onWalletKitError\", \"initialStep\"]);\n\n  const appIcon = (0, react_1.useMemo)(() => {\n    var _a;\n\n    return (_a = app.icon) !== null && _a !== void 0 ? _a : (0, jsx_runtime_1.jsx)(DefaultAppIcon_1.DefaultAppIcon, {}, void 0);\n  }, [app.icon]);\n  const [step, setStep] = (0, react_1.useState)(initialStep);\n  const [installProvider, setInstallProvider] = (0, react_1.useState)(null);\n  const {\n    disconnect,\n    activate\n  } = (0, use_solana_1.useSolana)();\n  const [walletToConnect, setWalletToConnect] = (0, react_1.useState)(null);\n\n  const onDismiss = () => {\n    modalProps.onDismiss(); // unset everything else after the modal unhide animation\n\n    setTimeout(() => {\n      setInstallProvider(null);\n      setWalletToConnect(null);\n      setStep(ModalStep.Intro);\n    }, 500);\n  };\n\n  return (0, jsx_runtime_1.jsxs)(Modal_1.Modal, Object.assign({}, modalProps, {\n    onDismiss: onDismiss,\n    onBack: step === ModalStep.Intro ? undefined : () => {\n      switch (step) {\n        case ModalStep.Select:\n          setStep(ModalStep.Intro);\n          break;\n\n        case ModalStep.Redirect:\n          setStep(ModalStep.Select);\n          break;\n\n        case ModalStep.Connecting:\n          setStep(ModalStep.Select);\n          break;\n\n        case ModalStep.LedgerAdvanced:\n          setStep(ModalStep.Select);\n          break;\n      }\n    },\n    hideSolanaLogo: step === ModalStep.Intro\n  }, {\n    children: [step === ModalStep.Intro && (0, jsx_runtime_1.jsx)(WalletStepIntro_1.WalletStepIntro, {\n      appName: app.name,\n      appIcon: appIcon,\n      onContinue: () => setStep(ModalStep.Select)\n    }, void 0), step === ModalStep.Select && (0, jsx_runtime_1.jsx)(WalletStepSelect_1.WalletStepSelect, {\n      onSelect: info => {\n        disconnect();\n\n        if (info.type === use_solana_1.WalletType.Ledger && info.info.name === \"Ledger (advanced)\") {\n          setStep(ModalStep.LedgerAdvanced);\n          return;\n        }\n\n        setWalletToConnect(info);\n        setStep(ModalStep.Connecting);\n\n        if (react_device_detect_1.isMobile && (info.type === use_solana_1.WalletType.Sollet || info.type === use_solana_1.WalletType.Solflare)) {\n          void activate(info.type);\n        }\n      },\n      onInstall: info => {\n        setInstallProvider(info);\n        setStep(ModalStep.Redirect);\n      }\n    }, void 0), step === ModalStep.Redirect && installProvider && (0, jsx_runtime_1.jsx)(WalletStepRedirect_1.WalletStepRedirect, {\n      info: installProvider\n    }, void 0), step === ModalStep.Connecting && walletToConnect && (0, jsx_runtime_1.jsx)(WalletStepConnecting_1.WalletStepConnecting, {\n      appIcon: appIcon,\n      info: walletToConnect,\n      onBack: () => {\n        setStep(ModalStep.Select);\n      },\n      onComplete: onDismiss\n    }, void 0), step === ModalStep.LedgerAdvanced && (0, jsx_runtime_1.jsx)(WalletStepLedgerAdvanced_1.WalletStepLedgerAdvanced, {\n      onBack: () => {\n        setStep(ModalStep.Select);\n      },\n      onError: onWalletKitError,\n      onSuccess: onDismiss\n    }, void 0)]\n  }), void 0);\n};\n\nexports.WalletSelectorModal = WalletSelectorModal;","map":{"version":3,"sources":["../../../src/components/WalletSelectorModal/index.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AACA,MAAA,YAAA,GAAA,OAAA,CAAA,qBAAA,CAAA;;AACA,MAAA,OAAA,GAAA,OAAA,CAAA,OAAA,CAAA;;AACA,MAAA,qBAAA,GAAA,OAAA,CAAA,qBAAA,CAAA;;AAIA,MAAA,OAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;AACA,MAAA,sBAAA,GAAA,OAAA,CAAA,wBAAA,CAAA;;AACA,MAAA,iBAAA,GAAA,OAAA,CAAA,mBAAA,CAAA;;AACA,MAAA,gBAAA,GAAA,OAAA,CAAA,kCAAA,CAAA;;AACA,MAAA,0BAAA,GAAA,OAAA,CAAA,4BAAA,CAAA;;AACA,MAAA,oBAAA,GAAA,OAAA,CAAA,sBAAA,CAAA;;AAEA,MAAA,kBAAA,GAAA,OAAA,CAAA,oBAAA,CAAA;;AAIA,IAAY,SAAZ;;AAAA,CAAA,UAAY,SAAZ,EAAqB;AACnB,EAAA,SAAA,CAAA,OAAA,CAAA,GAAA,OAAA;AACA,EAAA,SAAA,CAAA,QAAA,CAAA,GAAA,QAAA;AACA,EAAA,SAAA,CAAA,UAAA,CAAA,GAAA,UAAA;AACA,EAAA,SAAA,CAAA,YAAA,CAAA,GAAA,YAAA;AACA,EAAA,SAAA,CAAA,gBAAA,CAAA,GAAA,iBAAA;AACD,CAND,EAAY,SAAS,GAAT,OAAA,CAAA,SAAA,KAAA,OAAA,CAAA,SAAA,GAAS,EAAT,CAAZ;;AAQA,MAAM,uBAAuB,GAAI,GAAD,IAAe;AAC7C,EAAA,OAAO,CAAC,KAAR,CAAc,GAAd;AACD,CAFD;;AAIO,MAAM,mBAAmB,GAAqB,EAAD,IAKxC;MALyC;AACnD,IAAA,GADmD;AAEnD,IAAA,gBAAgB,GAAG,uBAFgC;AAGnD,IAAA,WAAW,GAAG,SAAS,CAAC;AAH2B,MAGtB,E;MAC1B,UAAU,GAAA,MAAA,CAAA,EAAA,EAJsC,CAAA,KAAA,EAAA,kBAAA,EAAA,aAAA,CAItC,C;;AAEb,QAAM,OAAO,GAAG,CAAA,GAAA,OAAA,CAAA,OAAA,EAAQ,MAAK;AAAA,QAAA,EAAA;;AAAC,WAAA,CAAA,EAAA,GAAA,GAAG,CAAC,IAAJ,MAAQ,IAAR,IAAQ,EAAA,KAAA,KAAA,CAAR,GAAQ,EAAR,GAAY,CAAA,GAAA,aAAA,CAAA,GAAA,EAAC,gBAAA,CAAA,cAAD,EAAe,EAAf,EAAe,KAAA,CAAf,CAAZ;AAA8B,GAA5C,EAA8C,CAAC,GAAG,CAAC,IAAL,CAA9C,CAAhB;AAEA,QAAM,CAAC,IAAD,EAAO,OAAP,IAAkB,CAAA,GAAA,OAAA,CAAA,QAAA,EAAoB,WAApB,CAAxB;AAEA,QAAM,CAAC,eAAD,EAAkB,kBAAlB,IACJ,CAAA,GAAA,OAAA,CAAA,QAAA,EAAoC,IAApC,CADF;AAGA,QAAM;AAAE,IAAA,UAAF;AAAc,IAAA;AAAd,MAA2B,CAAA,GAAA,YAAA,CAAA,SAAA,GAAjC;AACA,QAAM,CAAC,eAAD,EAAkB,kBAAlB,IAAwC,CAAA,GAAA,OAAA,CAAA,QAAA,EAC5C,IAD4C,CAA9C;;AAIA,QAAM,SAAS,GAAG,MAAK;AACrB,IAAA,UAAU,CAAC,SAAX,GADqB,CAGrB;;AACA,IAAA,UAAU,CAAC,MAAK;AACd,MAAA,kBAAkB,CAAC,IAAD,CAAlB;AACA,MAAA,kBAAkB,CAAC,IAAD,CAAlB;AACA,MAAA,OAAO,CAAC,SAAS,CAAC,KAAX,CAAP;AACD,KAJS,EAIP,GAJO,CAAV;AAKD,GATD;;AAWA,SACE,CAAA,GAAA,aAAA,CAAA,IAAA,EAAC,OAAA,CAAA,KAAD,EAAM,MAAA,CAAA,MAAA,CAAA,EAAA,EACA,UADA,EACU;AACd,IAAA,SAAS,EAAE,SADG;AAEd,IAAA,MAAM,EACJ,IAAI,KAAK,SAAS,CAAC,KAAnB,GACI,SADJ,GAEI,MAAK;AACH,cAAQ,IAAR;AACE,aAAK,SAAS,CAAC,MAAf;AACE,UAAA,OAAO,CAAC,SAAS,CAAC,KAAX,CAAP;AACA;;AACF,aAAK,SAAS,CAAC,QAAf;AACE,UAAA,OAAO,CAAC,SAAS,CAAC,MAAX,CAAP;AACA;;AACF,aAAK,SAAS,CAAC,UAAf;AACE,UAAA,OAAO,CAAC,SAAS,CAAC,MAAX,CAAP;AACA;;AACF,aAAK,SAAS,CAAC,cAAf;AACE,UAAA,OAAO,CAAC,SAAS,CAAC,MAAX,CAAP;AACA;AAZJ;AAcD,KApBO;AAsBd,IAAA,cAAc,EAAE,IAAI,KAAK,SAAS,CAAC;AAtBrB,GADV,EAuBoC;AAAA,IAAA,QAAA,EAAA,CAEvC,IAAI,KAAK,SAAS,CAAC,KAAnB,IACC,CAAA,GAAA,aAAA,CAAA,GAAA,EAAC,iBAAA,CAAA,eAAD,EAAgB;AACd,MAAA,OAAO,EAAE,GAAG,CAAC,IADC;AAEd,MAAA,OAAO,EAAE,OAFK;AAGd,MAAA,UAAU,EAAE,MAAM,OAAO,CAAC,SAAS,CAAC,MAAX;AAHX,KAAhB,EAG6C,KAAA,CAH7C,CAHsC,EASvC,IAAI,KAAK,SAAS,CAAC,MAAnB,IACC,CAAA,GAAA,aAAA,CAAA,GAAA,EAAC,kBAAA,CAAA,gBAAD,EAAiB;AACf,MAAA,QAAQ,EAAG,IAAD,IAAS;AACjB,QAAA,UAAU;;AAEV,YACE,IAAI,CAAC,IAAL,KAAc,YAAA,CAAA,UAAA,CAAW,MAAzB,IACA,IAAI,CAAC,IAAL,CAAU,IAAV,KAAmB,mBAFrB,EAGE;AACA,UAAA,OAAO,CAAC,SAAS,CAAC,cAAX,CAAP;AACA;AACD;;AAED,QAAA,kBAAkB,CAAC,IAAD,CAAlB;AACA,QAAA,OAAO,CAAC,SAAS,CAAC,UAAX,CAAP;;AAEA,YACE,qBAAA,CAAA,QAAA,KACC,IAAI,CAAC,IAAL,KAAc,YAAA,CAAA,UAAA,CAAW,MAAzB,IACC,IAAI,CAAC,IAAL,KAAc,YAAA,CAAA,UAAA,CAAW,QAF3B,CADF,EAIE;AACA,eAAK,QAAQ,CAAC,IAAI,CAAC,IAAN,CAAb;AACD;AACF,OAtBc;AAuBf,MAAA,SAAS,EAAG,IAAD,IAAS;AAClB,QAAA,kBAAkB,CAAC,IAAD,CAAlB;AACA,QAAA,OAAO,CAAC,SAAS,CAAC,QAAX,CAAP;AACD;AA1Bc,KAAjB,EA0BG,KAAA,CA1BH,CAVsC,EAuCvC,IAAI,KAAK,SAAS,CAAC,QAAnB,IAA+B,eAA/B,IACC,CAAA,GAAA,aAAA,CAAA,GAAA,EAAC,oBAAA,CAAA,kBAAD,EAAmB;AAAC,MAAA,IAAI,EAAE;AAAP,KAAnB,EAAyC,KAAA,CAAzC,CAxCsC,EA0CvC,IAAI,KAAK,SAAS,CAAC,UAAnB,IAAiC,eAAjC,IACC,CAAA,GAAA,aAAA,CAAA,GAAA,EAAC,sBAAA,CAAA,oBAAD,EAAqB;AACnB,MAAA,OAAO,EAAE,OADU;AAEnB,MAAA,IAAI,EAAE,eAFa;AAGnB,MAAA,MAAM,EAAE,MAAK;AACX,QAAA,OAAO,CAAC,SAAS,CAAC,MAAX,CAAP;AACD,OALkB;AAMnB,MAAA,UAAU,EAAE;AANO,KAArB,EAMuB,KAAA,CANvB,CA3CsC,EAoDvC,IAAI,KAAK,SAAS,CAAC,cAAnB,IACC,CAAA,GAAA,aAAA,CAAA,GAAA,EAAC,0BAAA,CAAA,wBAAD,EAAyB;AACvB,MAAA,MAAM,EAAE,MAAK;AACX,QAAA,OAAO,CAAC,SAAS,CAAC,MAAX,CAAP;AACD,OAHsB;AAIvB,MAAA,OAAO,EAAE,gBAJc;AAKvB,MAAA,SAAS,EAAE;AALY,KAAzB,EAKsB,KAAA,CALtB,CArDsC;AAAA,GAvBpC,CAAN,EAmFG,KAAA,CAnFH,CADF;AAuFD,CApHM;;AAAM,OAAA,CAAA,mBAAA,GAAmB,mBAAnB","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WalletSelectorModal = exports.ModalStep = void 0;\nconst jsx_runtime_1 = require(\"@emotion/react/jsx-runtime\");\nconst use_solana_1 = require(\"@saberhq/use-solana\");\nconst react_1 = require(\"react\");\nconst react_device_detect_1 = require(\"react-device-detect\");\nconst Modal_1 = require(\"../Modal\");\nconst WalletStepConnecting_1 = require(\"./WalletStepConnecting\");\nconst WalletStepIntro_1 = require(\"./WalletStepIntro\");\nconst DefaultAppIcon_1 = require(\"./WalletStepIntro/DefaultAppIcon\");\nconst WalletStepLedgerAdvanced_1 = require(\"./WalletStepLedgerAdvanced\");\nconst WalletStepRedirect_1 = require(\"./WalletStepRedirect\");\nconst WalletStepSelect_1 = require(\"./WalletStepSelect\");\nvar ModalStep;\n(function (ModalStep) {\n    ModalStep[\"Intro\"] = \"intro\";\n    ModalStep[\"Select\"] = \"select\";\n    ModalStep[\"Redirect\"] = \"redirect\";\n    ModalStep[\"Connecting\"] = \"connecting\";\n    ModalStep[\"LedgerAdvanced\"] = \"ledger-advanced\";\n})(ModalStep = exports.ModalStep || (exports.ModalStep = {}));\nconst defaultOnWalletKitError = (err) => {\n    console.error(err);\n};\nconst WalletSelectorModal = (_a) => {\n    var { app, onWalletKitError = defaultOnWalletKitError, initialStep = ModalStep.Intro } = _a, modalProps = __rest(_a, [\"app\", \"onWalletKitError\", \"initialStep\"]);\n    const appIcon = (0, react_1.useMemo)(() => { var _a; return (_a = app.icon) !== null && _a !== void 0 ? _a : (0, jsx_runtime_1.jsx)(DefaultAppIcon_1.DefaultAppIcon, {}, void 0); }, [app.icon]);\n    const [step, setStep] = (0, react_1.useState)(initialStep);\n    const [installProvider, setInstallProvider] = (0, react_1.useState)(null);\n    const { disconnect, activate } = (0, use_solana_1.useSolana)();\n    const [walletToConnect, setWalletToConnect] = (0, react_1.useState)(null);\n    const onDismiss = () => {\n        modalProps.onDismiss();\n        // unset everything else after the modal unhide animation\n        setTimeout(() => {\n            setInstallProvider(null);\n            setWalletToConnect(null);\n            setStep(ModalStep.Intro);\n        }, 500);\n    };\n    return ((0, jsx_runtime_1.jsxs)(Modal_1.Modal, Object.assign({}, modalProps, { onDismiss: onDismiss, onBack: step === ModalStep.Intro\n            ? undefined\n            : () => {\n                switch (step) {\n                    case ModalStep.Select:\n                        setStep(ModalStep.Intro);\n                        break;\n                    case ModalStep.Redirect:\n                        setStep(ModalStep.Select);\n                        break;\n                    case ModalStep.Connecting:\n                        setStep(ModalStep.Select);\n                        break;\n                    case ModalStep.LedgerAdvanced:\n                        setStep(ModalStep.Select);\n                        break;\n                }\n            }, hideSolanaLogo: step === ModalStep.Intro }, { children: [step === ModalStep.Intro && ((0, jsx_runtime_1.jsx)(WalletStepIntro_1.WalletStepIntro, { appName: app.name, appIcon: appIcon, onContinue: () => setStep(ModalStep.Select) }, void 0)), step === ModalStep.Select && ((0, jsx_runtime_1.jsx)(WalletStepSelect_1.WalletStepSelect, { onSelect: (info) => {\n                    disconnect();\n                    if (info.type === use_solana_1.WalletType.Ledger &&\n                        info.info.name === \"Ledger (advanced)\") {\n                        setStep(ModalStep.LedgerAdvanced);\n                        return;\n                    }\n                    setWalletToConnect(info);\n                    setStep(ModalStep.Connecting);\n                    if (react_device_detect_1.isMobile &&\n                        (info.type === use_solana_1.WalletType.Sollet ||\n                            info.type === use_solana_1.WalletType.Solflare)) {\n                        void activate(info.type);\n                    }\n                }, onInstall: (info) => {\n                    setInstallProvider(info);\n                    setStep(ModalStep.Redirect);\n                } }, void 0)), step === ModalStep.Redirect && installProvider && ((0, jsx_runtime_1.jsx)(WalletStepRedirect_1.WalletStepRedirect, { info: installProvider }, void 0)), step === ModalStep.Connecting && walletToConnect && ((0, jsx_runtime_1.jsx)(WalletStepConnecting_1.WalletStepConnecting, { appIcon: appIcon, info: walletToConnect, onBack: () => {\n                    setStep(ModalStep.Select);\n                }, onComplete: onDismiss }, void 0)), step === ModalStep.LedgerAdvanced && ((0, jsx_runtime_1.jsx)(WalletStepLedgerAdvanced_1.WalletStepLedgerAdvanced, { onBack: () => {\n                    setStep(ModalStep.Select);\n                }, onError: onWalletKitError, onSuccess: onDismiss }, void 0))] }), void 0));\n};\nexports.WalletSelectorModal = WalletSelectorModal;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}