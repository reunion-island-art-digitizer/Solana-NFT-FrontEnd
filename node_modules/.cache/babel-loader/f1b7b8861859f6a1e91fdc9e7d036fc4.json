{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"C:/Users/piroi16/Documents/GitHub/Solana-NFT-FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\");\n\nvar _classCallCheck = require(\"C:/Users/piroi16/Documents/GitHub/Solana-NFT-FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck\");\n\nvar _createClass = require(\"C:/Users/piroi16/Documents/GitHub/Solana-NFT-FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass\");\n\nvar _assertThisInitialized = require(\"C:/Users/piroi16/Documents/GitHub/Solana-NFT-FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/assertThisInitialized\");\n\nvar _inherits = require(\"C:/Users/piroi16/Documents/GitHub/Solana-NFT-FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits\");\n\nvar _createSuper = require(\"C:/Users/piroi16/Documents/GitHub/Solana-NFT-FrontEnd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createSuper\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MathWalletAdapter = void 0;\n\nvar tslib_1 = require(\"tslib\");\n\nvar web3_js_1 = require(\"@solana/web3.js\");\n\nvar eventemitter3_1 = (0, tslib_1.__importDefault)(require(\"eventemitter3\"));\n\nvar types_1 = require(\"../types\");\n\nvar MathWalletAdapter = /*#__PURE__*/function (_eventemitter3_1$defa) {\n  _inherits(MathWalletAdapter, _eventemitter3_1$defa);\n\n  var _super = _createSuper(MathWalletAdapter);\n\n  function MathWalletAdapter() {\n    var _this;\n\n    _classCallCheck(this, MathWalletAdapter);\n\n    _this = _super.call(this);\n\n    _this.connect = function () {\n      return (0, tslib_1.__awaiter)(_assertThisInitialized(_this), void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (!this._onProcess) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\");\n\n              case 2:\n                if (this._provider) {\n                  _context.next = 5;\n                  break;\n                }\n\n                window.open(\"https://mathwallet.org/\", \"_blank\", \"noopener noreferrer\");\n                throw new Error(\"Math Wallet not installed\");\n\n              case 5:\n                this._onProcess = true;\n                _context.next = 8;\n                return this._provider.getAccount().then(function (account) {\n                  _this2._publicKey = new web3_js_1.PublicKey(account);\n                  _this2._connected = true;\n\n                  _this2.emit(\"connect\", _this2._publicKey);\n                }).catch(function () {\n                  _this2.disconnect();\n                }).finally(function () {\n                  _this2._onProcess = false;\n                });\n\n              case 8:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n    };\n\n    _this._onProcess = false;\n    _this._connected = false;\n    return _this;\n  }\n\n  _createClass(MathWalletAdapter, [{\n    key: \"connected\",\n    get: function get() {\n      return this._connected;\n    }\n  }, {\n    key: \"autoApprove\",\n    get: function get() {\n      return false;\n    }\n  }, {\n    key: \"signAllTransactions\",\n    value: function signAllTransactions(transactions) {\n      return (0, tslib_1.__awaiter)(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (this._provider) {\n                  _context2.next = 2;\n                  break;\n                }\n\n                return _context2.abrupt(\"return\", transactions);\n\n              case 2:\n                _context2.next = 4;\n                return this._provider.signAllTransactions(transactions);\n\n              case 4:\n                return _context2.abrupt(\"return\", _context2.sent);\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n    }\n  }, {\n    key: \"_provider\",\n    get: function get() {\n      var _a;\n\n      if ((_a = window === null || window === void 0 ? void 0 : window.solana) === null || _a === void 0 ? void 0 : _a.isMathWallet) {\n        return window.solana;\n      }\n\n      return undefined;\n    }\n  }, {\n    key: \"publicKey\",\n    get: function get() {\n      return this._publicKey || types_1.DEFAULT_PUBLIC_KEY;\n    }\n  }, {\n    key: \"signTransaction\",\n    value: function signTransaction(transaction) {\n      return (0, tslib_1.__awaiter)(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (this._provider) {\n                  _context3.next = 2;\n                  break;\n                }\n\n                return _context3.abrupt(\"return\", transaction);\n\n              case 2:\n                return _context3.abrupt(\"return\", this._provider.signTransaction(transaction));\n\n              case 3:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n    }\n  }, {\n    key: \"disconnect\",\n    value: function disconnect() {\n      if (this._publicKey) {\n        this._publicKey = undefined;\n        this._connected = false;\n        this.emit(\"disconnect\");\n      }\n    }\n  }]);\n\n  return MathWalletAdapter;\n}(eventemitter3_1.default);\n\nexports.MathWalletAdapter = MathWalletAdapter;","map":{"version":3,"sources":["../../../src/adapters/math/index.tsx"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AACA,IAAA,SAAA,GAAA,OAAA,CAAA,iBAAA,CAAA;;AACA,IAAA,eAAA,GAAA,CAAA,GAAA,OAAA,CAAA,eAAA,EAAA,OAAA,CAAA,eAAA,CAAA,CAAA;;AAIA,IAAA,OAAA,GAAA,OAAA,CAAA,UAAA,CAAA;;IAEa,iB;;;;;AAIX,+BAAA;AAAA;;AAAA;;AACE;;AA0CF,UAAA,OAAA,GAAU;AAAA,aAA0B,CAAA,GAAA,OAAA,CAAA,SAAA,iCAAA,KAAA,CAAA,EAAA,KAAA,CAAA,wCAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,qBAC9B,KAAK,UADyB;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA,oBAK7B,KAAK,SALwB;AAAA;AAAA;AAAA;;AAMhC,gBAAA,MAAM,CAAC,IAAP,CAAY,yBAAZ,EAAuC,QAAvC,EAAiD,qBAAjD;AANgC,sBAO1B,IAAI,KAAJ,CAAU,2BAAV,CAP0B;;AAAA;AAUlC,qBAAK,UAAL,GAAkB,IAAlB;AAVkC;AAWlC,uBAAM,KAAK,SAAL,CACH,UADG,GAEH,IAFG,CAEE,UAAC,OAAD,EAAY;AAChB,kBAAA,MAAI,CAAC,UAAL,GAAkB,IAAI,SAAA,CAAA,SAAJ,CAAc,OAAd,CAAlB;AACA,kBAAA,MAAI,CAAC,UAAL,GAAkB,IAAlB;;AACA,kBAAA,MAAI,CAAC,IAAL,CAAU,SAAV,EAAqB,MAAI,CAAC,UAA1B;AACD,iBANG,EAOH,KAPG,CAOG,YAAK;AACV,kBAAA,MAAI,CAAC,UAAL;AACD,iBATG,EAUH,OAVG,CAUK,YAAK;AACZ,kBAAA,MAAI,CAAC,UAAL,GAAkB,KAAlB;AACD,iBAZG,CAAN;;AAXkC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAA,EAA1B;AAAA,KAAV;;AAzCE,UAAK,UAAL,GAAkB,KAAlB;AACA,UAAK,UAAL,GAAkB,KAAlB;AAHF;AAIC;;;;SAED,eAAa;AACX,aAAO,KAAK,UAAZ;AACD;;;SAED,eAAe;AACb,aAAO,KAAP;AACD;;;WAEY,6BACX,YADW,EACgB;;;;;;oBAEtB,KAAK,S;;;;;kDACD,Y;;;;AAGF,uBAAM,KAAK,SAAL,CAAe,mBAAf,CAAmC,YAAnC,CAAN;;;;;;;;;;;;AACR;;;SAED,eAAqB;;;AACnB,UAAI,CAAA,EAAA,GAAA,MAAM,KAAA,IAAN,IAAA,MAAM,KAAA,KAAA,CAAN,GAAM,KAAA,CAAN,GAAA,MAAM,CAAE,MAAR,MAAc,IAAd,IAAc,EAAA,KAAA,KAAA,CAAd,GAAc,KAAA,CAAd,GAAc,EAAA,CAAE,YAApB,EAAkC;AAChC,eAAO,MAAM,CAAC,MAAd;AACD;;AACD,aAAO,SAAP;AACD;;;SAED,eAAa;AACX,aAAO,KAAK,UAAL,IAAmB,OAAA,CAAA,kBAA1B;AACD;;;WAEK,yBAAgB,WAAhB,EAAwC;;;;;;oBACvC,KAAK,S;;;;;kDACD,W;;;kDAGF,KAAK,SAAL,CAAe,eAAf,CAA+B,WAA/B,C;;;;;;;;;AACR;;;WA4BD,sBAAU;AACR,UAAI,KAAK,UAAT,EAAqB;AACnB,aAAK,UAAL,GAAkB,SAAlB;AACA,aAAK,UAAL,GAAkB,KAAlB;AACA,aAAK,IAAL,CAAU,YAAV;AACD;AACF;;;;EA/EoC,eAAA,CAAA,O;;AAAvC,OAAA,CAAA,iBAAA,GAAA,iBAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MathWalletAdapter = void 0;\nconst tslib_1 = require(\"tslib\");\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst eventemitter3_1 = (0, tslib_1.__importDefault)(require(\"eventemitter3\"));\nconst types_1 = require(\"../types\");\nclass MathWalletAdapter extends eventemitter3_1.default {\n    constructor() {\n        super();\n        this.connect = () => (0, tslib_1.__awaiter)(this, void 0, void 0, function* () {\n            if (this._onProcess) {\n                return;\n            }\n            if (!this._provider) {\n                window.open(\"https://mathwallet.org/\", \"_blank\", \"noopener noreferrer\");\n                throw new Error(\"Math Wallet not installed\");\n            }\n            this._onProcess = true;\n            yield this._provider\n                .getAccount()\n                .then((account) => {\n                this._publicKey = new web3_js_1.PublicKey(account);\n                this._connected = true;\n                this.emit(\"connect\", this._publicKey);\n            })\n                .catch(() => {\n                this.disconnect();\n            })\n                .finally(() => {\n                this._onProcess = false;\n            });\n        });\n        this._onProcess = false;\n        this._connected = false;\n    }\n    get connected() {\n        return this._connected;\n    }\n    get autoApprove() {\n        return false;\n    }\n    signAllTransactions(transactions) {\n        return (0, tslib_1.__awaiter)(this, void 0, void 0, function* () {\n            if (!this._provider) {\n                return transactions;\n            }\n            return yield this._provider.signAllTransactions(transactions);\n        });\n    }\n    get _provider() {\n        var _a;\n        if ((_a = window === null || window === void 0 ? void 0 : window.solana) === null || _a === void 0 ? void 0 : _a.isMathWallet) {\n            return window.solana;\n        }\n        return undefined;\n    }\n    get publicKey() {\n        return this._publicKey || types_1.DEFAULT_PUBLIC_KEY;\n    }\n    signTransaction(transaction) {\n        return (0, tslib_1.__awaiter)(this, void 0, void 0, function* () {\n            if (!this._provider) {\n                return transaction;\n            }\n            return this._provider.signTransaction(transaction);\n        });\n    }\n    disconnect() {\n        if (this._publicKey) {\n            this._publicKey = undefined;\n            this._connected = false;\n            this.emit(\"disconnect\");\n        }\n    }\n}\nexports.MathWalletAdapter = MathWalletAdapter;\n//# sourceMappingURL=index.js.map"]},"metadata":{},"sourceType":"script"}