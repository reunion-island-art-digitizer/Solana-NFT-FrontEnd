{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.deserializeMint = exports.deserializeAccount = exports.MintLayout = exports.TokenAccountLayout = exports.Uint64Layout = exports.PublicKeyLayout = exports.structLayout = void 0;\n\nvar tslib_1 = require(\"tslib\");\n\nvar BufferLayout = (0, tslib_1.__importStar)(require(\"@solana/buffer-layout\"));\n\nvar spl_token_1 = require(\"@solana/spl-token\");\n\nvar web3_js_1 = require(\"@solana/web3.js\");\n/**\n * Typed struct buffer layout\n * @param fields\n * @param property\n * @param decodePrefixes\n * @returns\n */\n\n\nvar structLayout = function structLayout(fields, property, decodePrefixes) {\n  return BufferLayout.struct(fields, property, decodePrefixes);\n};\n\nexports.structLayout = structLayout;\n/**\n * Layout for a public key\n */\n\nvar PublicKeyLayout = function PublicKeyLayout() {\n  var property = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"publicKey\";\n  return BufferLayout.blob(32, property);\n};\n\nexports.PublicKeyLayout = PublicKeyLayout;\n/**\n * Layout for a 64bit unsigned value\n */\n\nvar Uint64Layout = function Uint64Layout() {\n  var property = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"uint64\";\n  return BufferLayout.blob(8, property);\n};\n\nexports.Uint64Layout = Uint64Layout;\n/**\n * Layout for a TokenAccount.\n */\n\nexports.TokenAccountLayout = spl_token_1.AccountLayout;\n/**\n * Layout for a Mint.\n */\n\nexports.MintLayout = spl_token_1.MintLayout;\n/**\n * Deserializes a token account.\n * @param address\n * @param data\n * @returns\n */\n\nvar deserializeAccount = function deserializeAccount(data) {\n  var accountInfo = exports.TokenAccountLayout.decode(data);\n  var mint = new web3_js_1.PublicKey(accountInfo.mint);\n  var owner = new web3_js_1.PublicKey(accountInfo.owner);\n  var amount = spl_token_1.u64.fromBuffer(accountInfo.amount);\n  var delegate;\n  var delegatedAmount;\n\n  if (accountInfo.delegateOption === 0) {\n    delegate = null;\n    delegatedAmount = new spl_token_1.u64(0);\n  } else {\n    delegate = new web3_js_1.PublicKey(accountInfo.delegate);\n    delegatedAmount = spl_token_1.u64.fromBuffer(accountInfo.delegatedAmount);\n  }\n\n  var isInitialized = accountInfo.state !== 0;\n  var isFrozen = accountInfo.state === 2;\n  var rentExemptReserve;\n  var isNative;\n\n  if (accountInfo.isNativeOption === 1) {\n    rentExemptReserve = spl_token_1.u64.fromBuffer(accountInfo.isNative);\n    isNative = true;\n  } else {\n    rentExemptReserve = null;\n    isNative = false;\n  }\n\n  var closeAuthority;\n\n  if (accountInfo.closeAuthorityOption === 0) {\n    closeAuthority = null;\n  } else {\n    closeAuthority = new web3_js_1.PublicKey(accountInfo.closeAuthority);\n  }\n\n  return {\n    mint: mint,\n    owner: owner,\n    amount: amount,\n    delegate: delegate,\n    delegatedAmount: delegatedAmount,\n    isInitialized: isInitialized,\n    isFrozen: isFrozen,\n    rentExemptReserve: rentExemptReserve,\n    isNative: isNative,\n    closeAuthority: closeAuthority\n  };\n};\n\nexports.deserializeAccount = deserializeAccount;\n/**\n * Deserialize a {@link Buffer} into a {@link MintInfo}.\n * @param data\n * @returns\n */\n\nvar deserializeMint = function deserializeMint(data) {\n  if (data.length !== exports.MintLayout.span) {\n    throw new Error(\"Not a valid Mint\");\n  }\n\n  var mintInfo = exports.MintLayout.decode(data);\n  var mintAuthority;\n\n  if (mintInfo.mintAuthorityOption === 0) {\n    mintAuthority = null;\n  } else {\n    mintAuthority = new web3_js_1.PublicKey(mintInfo.mintAuthority);\n  }\n\n  var supply = spl_token_1.u64.fromBuffer(mintInfo.supply);\n  var isInitialized = mintInfo.isInitialized !== 0;\n  var freezeAuthority;\n\n  if (mintInfo.freezeAuthorityOption === 0) {\n    freezeAuthority = null;\n  } else {\n    freezeAuthority = new web3_js_1.PublicKey(mintInfo.freezeAuthority);\n  }\n\n  return {\n    mintAuthority: mintAuthority,\n    supply: supply,\n    decimals: mintInfo.decimals,\n    isInitialized: isInitialized,\n    freezeAuthority: freezeAuthority\n  };\n};\n\nexports.deserializeMint = deserializeMint;","map":{"version":3,"sources":["../src/layout.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.deserializeMint = exports.deserializeAccount = exports.MintLayout = exports.TokenAccountLayout = exports.Uint64Layout = exports.PublicKeyLayout = exports.structLayout = void 0;\nconst tslib_1 = require(\"tslib\");\nconst BufferLayout = (0, tslib_1.__importStar)(require(\"@solana/buffer-layout\"));\nconst spl_token_1 = require(\"@solana/spl-token\");\nconst web3_js_1 = require(\"@solana/web3.js\");\n/**\n * Typed struct buffer layout\n * @param fields\n * @param property\n * @param decodePrefixes\n * @returns\n */\nconst structLayout = (fields, property, decodePrefixes) => BufferLayout.struct(fields, property, decodePrefixes);\nexports.structLayout = structLayout;\n/**\n * Layout for a public key\n */\nconst PublicKeyLayout = (property = \"publicKey\") => {\n    return BufferLayout.blob(32, property);\n};\nexports.PublicKeyLayout = PublicKeyLayout;\n/**\n * Layout for a 64bit unsigned value\n */\nconst Uint64Layout = (property = \"uint64\") => {\n    return BufferLayout.blob(8, property);\n};\nexports.Uint64Layout = Uint64Layout;\n/**\n * Layout for a TokenAccount.\n */\nexports.TokenAccountLayout = spl_token_1.AccountLayout;\n/**\n * Layout for a Mint.\n */\nexports.MintLayout = spl_token_1.MintLayout;\n/**\n * Deserializes a token account.\n * @param address\n * @param data\n * @returns\n */\nconst deserializeAccount = (data) => {\n    const accountInfo = exports.TokenAccountLayout.decode(data);\n    const mint = new web3_js_1.PublicKey(accountInfo.mint);\n    const owner = new web3_js_1.PublicKey(accountInfo.owner);\n    const amount = spl_token_1.u64.fromBuffer(accountInfo.amount);\n    let delegate;\n    let delegatedAmount;\n    if (accountInfo.delegateOption === 0) {\n        delegate = null;\n        delegatedAmount = new spl_token_1.u64(0);\n    }\n    else {\n        delegate = new web3_js_1.PublicKey(accountInfo.delegate);\n        delegatedAmount = spl_token_1.u64.fromBuffer(accountInfo.delegatedAmount);\n    }\n    const isInitialized = accountInfo.state !== 0;\n    const isFrozen = accountInfo.state === 2;\n    let rentExemptReserve;\n    let isNative;\n    if (accountInfo.isNativeOption === 1) {\n        rentExemptReserve = spl_token_1.u64.fromBuffer(accountInfo.isNative);\n        isNative = true;\n    }\n    else {\n        rentExemptReserve = null;\n        isNative = false;\n    }\n    let closeAuthority;\n    if (accountInfo.closeAuthorityOption === 0) {\n        closeAuthority = null;\n    }\n    else {\n        closeAuthority = new web3_js_1.PublicKey(accountInfo.closeAuthority);\n    }\n    return {\n        mint,\n        owner,\n        amount,\n        delegate,\n        delegatedAmount,\n        isInitialized,\n        isFrozen,\n        rentExemptReserve,\n        isNative,\n        closeAuthority,\n    };\n};\nexports.deserializeAccount = deserializeAccount;\n/**\n * Deserialize a {@link Buffer} into a {@link MintInfo}.\n * @param data\n * @returns\n */\nconst deserializeMint = (data) => {\n    if (data.length !== exports.MintLayout.span) {\n        throw new Error(\"Not a valid Mint\");\n    }\n    const mintInfo = exports.MintLayout.decode(data);\n    let mintAuthority;\n    if (mintInfo.mintAuthorityOption === 0) {\n        mintAuthority = null;\n    }\n    else {\n        mintAuthority = new web3_js_1.PublicKey(mintInfo.mintAuthority);\n    }\n    const supply = spl_token_1.u64.fromBuffer(mintInfo.supply);\n    const isInitialized = mintInfo.isInitialized !== 0;\n    let freezeAuthority;\n    if (mintInfo.freezeAuthorityOption === 0) {\n        freezeAuthority = null;\n    }\n    else {\n        freezeAuthority = new web3_js_1.PublicKey(mintInfo.freezeAuthority);\n    }\n    return {\n        mintAuthority,\n        supply,\n        decimals: mintInfo.decimals,\n        isInitialized,\n        freezeAuthority,\n    };\n};\nexports.deserializeMint = deserializeMint;\n//# sourceMappingURL=layout.js.map"]},"metadata":{},"sourceType":"script"}